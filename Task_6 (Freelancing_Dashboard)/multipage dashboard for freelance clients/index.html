<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Freelance Dashboard</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script crossorigin src="https://unpkg.com/history@5/umd/history.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-router@6.3.0/umd/react-router.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-router-dom@6.3.0/umd/react-router-dom.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: "#5f0f40",
                        secondary: "#9A031E",
                        accent: "#FB8B24",
                        warn: "#E36414",
                        darkblue: "#0F4C5C",
                    }
                }
            }
        }
    </script>
</head>

<body class="bg-gray-100">
    <div id="root" class="p-10">
        <h1 class="text-2xl font-bold text-gray-700">Loading Dashboard...</h1>
        <p class="text-gray-500">If this message persists, check the console for errors.</p>
    </div>

    <div id="error-container"
        class="hidden fixed bottom-0 left-0 w-full bg-red-100 border-t-4 border-red-500 text-red-700 p-4 shadow-lg z-50">
        <h3 class="font-bold">Error Detected:</h3>
        <pre id="error-message" class="whitespace-pre-wrap"></pre>
    </div>

    <script>
        window.onerror = function (message, source, lineno, colno, error) {
            document.getElementById('error-container').classList.remove('hidden');
            document.getElementById('error-message').textContent = message + '\nAt: ' + source + ':' + lineno + ':' + colno;
        };
    </script>

    <script type="text/babel">

        const { HashRouter, Routes, Route, Link, useLocation } = ReactRouterDOM;

        /* ================= SIDEBAR ================= */

        function Sidebar() {
            const location = useLocation();

            const navItem = (path, label) => (
                <Link
                    to={path}
                    className={`block px-4 py-3 rounded-xl transition-all duration-300 
      ${location.pathname === path
                            ? "bg-accent text-black font-semibold shadow-lg"
                            : "text-white/80 hover:bg-white/10 hover:text-white"
                        }`}
                >
                    {label}
                </Link>
            );

            return (
                <div className="bg-gradient-to-b from-primary via-secondary to-darkblue 
                    w-64 min-h-screen p-6 fixed left-0 top-0 shadow-2xl">
                    <h2 className="text-3xl font-bold text-white mb-10 tracking-wide">
                        Freelancer
                    </h2>

                    <nav className="space-y-3">
                        {navItem("/", "Overview")}
                        {navItem("/projects", "Projects")}
                        {navItem("/profile", "Profile")}
                    </nav>
                </div>
            );
        }

        /* ================= HEADER ================= */

        function Header() {
            const [open, setOpen] = React.useState(false);
            const notificationRef = React.useRef(null);

            React.useEffect(() => {
                function handleClickOutside(event) {
                    if (notificationRef.current && !notificationRef.current.contains(event.target)) {
                        setOpen(false);
                    }
                }
                document.addEventListener("mousedown", handleClickOutside);
                return () => {
                    document.removeEventListener("mousedown", handleClickOutside);
                };
            }, [notificationRef]);

            return (
                <div className="flex justify-between items-center 
                        bg-white px-8 py-4 
                        shadow-md ml-64 sticky top-0 z-40">

                    {/* LEFT SIDE â€“ PAGE TITLE */}
                    <div>
                        <h1 className="text-2xl font-bold text-primary">
                            Dashboard Overview
                        </h1>
                        <p className="text-sm text-gray-500">
                            Track your projects, earnings and activity
                        </p>
                    </div>

                    {/* RIGHT SIDE â€“ PROFILE + NOTIFICATION */}
                    <div className="flex items-center gap-6 relative">

                        {/* Notification Button */}
                        <div className="relative" ref={notificationRef}>
                            <button
                                onClick={() => setOpen(!open)}
                                className="relative bg-gray-100 hover:bg-gray-200 
                                   p-3 rounded-full transition"
                            >
                                ðŸ””
                                <span className="absolute -top-1 -right-1 
                                         bg-warn text-white text-xs 
                                         px-1.5 py-0.5 rounded-full">
                                    3
                                </span>
                            </button>

                            {open && (
                                <div className="absolute right-0 mt-4 w-80 
                                        bg-white rounded-2xl 
                                        shadow-2xl border overflow-hidden z-50">

                                    {/* Dropdown Header */}
                                    <div className="bg-gradient-to-r 
                                            from-primary to-secondary 
                                            text-white px-5 py-4">
                                        <h4 className="font-semibold text-lg">
                                            Notifications
                                        </h4>
                                        <p className="text-xs opacity-80">
                                            You have 3 new updates
                                        </p>
                                    </div>

                                    {/* Notification Items */}
                                    <div className="divide-y max-h-64 overflow-y-auto">
                                        <div className="p-4 hover:bg-gray-50 transition cursor-pointer">
                                            <p className="text-sm font-medium">
                                                âœ” Project Alpha Updated
                                            </p>
                                            <span className="text-xs text-gray-400">
                                                2 hours ago
                                            </span>
                                        </div>

                                        <div className="p-4 hover:bg-gray-50 transition cursor-pointer">
                                            <p className="text-sm font-medium">
                                                ðŸ’° Payment Received ($800)
                                            </p>
                                            <span className="text-xs text-gray-400">
                                                Yesterday
                                            </span>
                                        </div>

                                        <div className="p-4 hover:bg-gray-50 transition cursor-pointer">
                                            <p className="text-sm font-medium">
                                                ðŸ“… New Task Assigned
                                            </p>
                                            <span className="text-xs text-gray-400">
                                                2 days ago
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>

                        {/* Profile Section */}
                        <div className="flex items-center gap-3 
                                bg-gray-100 px-4 py-2 
                                rounded-xl hover:bg-gray-200 transition cursor-pointer">

                            {/* Avatar */}
                            <div className="w-10 h-10 rounded-full 
                                    bg-gradient-to-r 
                                    from-accent to-warn 
                                    flex items-center justify-center 
                                    text-white font-bold">
                                AS
                            </div>

                            {/* User Info */}
                            <div className="hidden sm:block">
                                <p className="text-sm font-semibold text-darkblue">
                                    Asma Channa
                                </p>
                                <p className="text-xs text-gray-500">
                                    Freelancer
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }


        /* ================= STAT CARD ================= */

        function Card({ title, value }) {
            return (
                <div className="bg-white rounded-2xl p-6 shadow-lg 
                    hover:shadow-2xl hover:-translate-y-1
                    transition duration-300 border border-gray-100">
                    <p className="text-gray-400 text-sm uppercase tracking-wider">
                        {title}
                    </p>
                    <h3 className="text-3xl font-bold mt-3 text-primary">
                        {value}
                    </h3>
                </div>
            );
        }

        /* ================= OVERVIEW ================= */

        function Overview() {
            const chartRef = React.useRef(null);
            const chartInstance = React.useRef(null);

            React.useEffect(() => {
                if (chartInstance.current) chartInstance.current.destroy();

                const ctx = chartRef.current.getContext("2d");

                chartInstance.current = new Chart(ctx, {
                    type: "bar",
                    data: {
                        labels: ["Jan", "Feb", "Mar", "Apr", "May"],
                        datasets: [
                            {
                                data: [500, 800, 650, 900, 1200],
                                backgroundColor: "#FB8B24",
                                borderRadius: 8,
                            },
                        ],
                    },
                    options: {
                        plugins: { legend: { display: false } },
                        responsive: true,
                        maintainAspectRatio: false,
                    },
                });
            }, []);

            return (
                <div className="p-8 grid gap-8">
                    <div className="grid md:grid-cols-3 gap-8">
                        <Card title="Total Projects" value="12" />
                        <Card title="Total Earnings" value="$4,200" />
                        <Card title="Tasks Due" value="5" />
                    </div>

                    <div className="bg-white rounded-2xl p-8 shadow-xl h-96">
                        <h3 className="text-xl font-semibold text-darkblue mb-6">
                            Monthly Earnings
                        </h3>
                        <canvas ref={chartRef}></canvas>
                    </div>
                </div>
            );
        }

        /* ================= PROJECTS ================= */

        function Projects() {
            const projects = [
                { name: "Website Redesign", status: "In Progress", deadline: "20 Mar" },
                { name: "Mobile App", status: "Completed", deadline: "05 Feb" },
                { name: "Dashboard UI", status: "Pending", deadline: "30 Mar" },
            ];

            const getStatusBadge = (status) => {
                switch (status) {
                    case "Completed":
                        return "bg-green-100 text-green-700 border-green-200";
                    case "In Progress":
                        return "bg-blue-100 text-blue-700 border-blue-200";
                    case "Pending":
                        // Using 'accent' color logic but mapping to yellow/orange for readability
                        return "bg-yellow-100 text-yellow-700 border-yellow-200";
                    default:
                        return "bg-gray-100 text-gray-700 border-gray-200";
                }
            };

            return (
                <div className="p-8">
                    <h2 className="text-2xl font-bold text-darkblue mb-6">
                        Projects Overview
                    </h2>

                    <div className="bg-white rounded-2xl shadow-xl overflow-hidden">
                        <table className="w-full text-left border-collapse">
                            <thead className="bg-primary text-white">
                                <tr>
                                    <th className="p-4 font-semibold uppercase text-sm tracking-wider">Project</th>
                                    <th className="p-4 font-semibold uppercase text-sm tracking-wider">Status</th>
                                    <th className="p-4 font-semibold uppercase text-sm tracking-wider">Deadline</th>
                                </tr>
                            </thead>
                            <tbody>
                                {projects.map((p, i) => (
                                    <tr
                                        key={i}
                                        className="border-b border-gray-100 hover:bg-gray-50 transition duration-150"
                                    >
                                        <td className="p-4 font-medium text-gray-800">{p.name}</td>
                                        <td className="p-4">
                                            <span className={`px-3 py-1 rounded-full text-xs font-bold border ${getStatusBadge(p.status)} shadow-sm uppercase tracking-wide inline-block min-w-[100px] text-center`}>
                                                {p.status}
                                            </span>
                                        </td>
                                        <td className="p-4 text-gray-500 font-mono text-sm">{p.deadline}</td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                </div>
            );
        }

        /* ================= PROFILE ================= */

        function Profile() {
            return (
                <div className="p-8 max-w-2xl">
                    <h2 className="text-2xl font-bold text-darkblue mb-6">
                        Profile Settings
                    </h2>

                    <div className="bg-white rounded-2xl shadow-xl p-8 space-y-6">
                        <input
                            className="w-full p-3 border rounded-xl focus:ring-2 focus:ring-accent"
                            placeholder="Full Name"
                        />
                        <input
                            className="w-full p-3 border rounded-xl focus:ring-2 focus:ring-accent"
                            placeholder="Email Address"
                        />
                        <input
                            type="password"
                            className="w-full p-3 border rounded-xl focus:ring-2 focus:ring-accent"
                            placeholder="Password"
                        />

                        <button className="bg-gradient-to-r from-accent to-warn 
                           text-white px-6 py-3 rounded-xl 
                           shadow-lg hover:scale-105 transition">
                            Save Changes
                        </button>
                    </div>
                </div>
            );
        }

        /* ================= APP ================= */

        function App() {
            return (
                <HashRouter>
                    <div className="flex bg-gray-100 min-h-screen font-sans">
                        <Sidebar />
                        <div className="ml-64 flex-1 flex flex-col">
                            <Header />
                            <main className="flex-1 bg-gray-100">
                                <Routes>
                                    <Route path="/" element={<Overview />} />
                                    <Route path="/projects" element={<Projects />} />
                                    <Route path="/profile" element={<Profile />} />
                                </Routes>
                            </main>
                        </div>
                    </div>
                </HashRouter>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById("root"));
        root.render(<App />);

    </script>

</body>

</html>